<Highlight>
  A flexible, framework validation agnostic, type-safe factory for creating
  [Next.JS App Router route
  handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers).
</Highlight>

```tsx
import { object, string, number } from 'decoders'
import { createSafeRouteHandler } from '@sugardarius/anzen'
import { auth } from '~/lib/auth'

export const POST = createSafeRouteHandler(
  {
    authorize: async ({ req }) => {
      const session = await auth.getSession(req)
      if (!session) {
        return new Response(null, { status: 401 })
      }

      return { user: session.user }
    },
    body: object({
      foo: string,
      bar: number,
    }),
  },
  async ({ auth, body }, req): Promise<Response> => {
    return Response.json({ user: auth.user, body }, { status: 200 })
  }
)
```

- ðŸ”§ Framework validation agnostic, use a validation library of your choice supporting [Standard Schema](https://standardschema.dev/).
- ðŸ§  Focused functionalities, use only features you want.
- ðŸ§¹ Clean and flexible API.
- ðŸ”’ Type-safe.
- ðŸŒ± Dependency free.
- ðŸª¶ Less than 100kB unpacked.

## Install

```sh
npm i @sugardarius/anzen
```

## Framework validation agnostic

By design the factory is framework validation agnostic ðŸŒŸ. When doing your validations you can use whatever you want as framework validation as long as it implements the [Standard Schema](https://github.com/standard-schema/standard-schema) common interface. You can use your favorite validation library like [Zod](https://zod.dev/) or [decoders](https://decoders.cc/).

```tsx
// (POST) /app/api/races/[id]/route.ts
import { z } from 'zod'
import { object, string, number } from 'decoders'

export const POST = createSafeRouteHandler(
  {
    // `zod` for segments dictionary validation
    segments: { id: z.string() }
    // `decoders` for body object validation
    body: object({
      id: number,
      name: string,
    }),
  },
  async ({ segments, body }) => {
    return Response.json({ segments, body })
  }
)
```
